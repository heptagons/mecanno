\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{hexa}
	[2023/12/19 v0.01]

\RequirePackage{tikz}

\newcommand{\meccanostrip}[4][000000] % [color]{n}{sep}{prop}
{
 \definecolor{main}{HTML}{#1}
 \draw[main] (0,{{2*#4}})
   -- ++({#2*#3},0) arc(+90:-90:{2*#4})
   -- ++({-#2*#3},0) arc(270:90:{2*#4});
 \foreach \x in {0,1,...,#2}
  \draw[main] (\x*#3,0) circle (#4);
}

\newcommand{\meccanohexagon}[4]{ %a,b,p,r
 \pgfmathsetmacro\a{#1}
 \pgfmathsetmacro\b{#2}
 \pgfmathsetmacro\ab{\a-\b}
 \pgfmathsetmacro\abb{\a-\b-\b}
 \pgfmathsetmacro\c{int(sqrt(\a^2 + \b^2 - \a*\b))}
 \pgfmathsetmacro\alpha{acos((\b^2 + \c^2 - \ab^2)/(2*\b*\c))}
 \pgfmathsetmacro\beta{acos((\abb/2)/(\c))}

 %\path(0,-3) node{$\alpha$};

  \meccanostrip[FF4400]{\ab}{1}{#3}
  \path(0,0) ++(-90:#4 + #3) node{$A$};
  \path(\abb,0) ++(-90:#4 + #3) node{$F$};

  \begin{scope}[shift={(0,0)},rotate=\beta]
   \meccanostrip[0088FF]{\c}{1}{#3}
  \end{scope}


  \begin{scope}[shift={(\abb,0)},rotate=\alpha]
   \meccanostrip[00CC00]{\c}{1}{#3}
  \end{scope}

  \begin{scope}[shift={(\ab,0)}, rotate=60]
   \meccanostrip[FF4400]{\ab}{1}{#3}
   \path(0,0) ++(180:#4 + #3) node{$B$};

   \begin{scope}[shift={(\ab,0)},rotate=60]
    \meccanostrip[FF4400]{\ab}{1}{#3}
    \path(0,0) ++(-90:#4 + #3) node{$C$};
    \path(\abb,0) ++(-90:#4 + #3) node{$G$};
    \begin{scope}[shift={(0,0)},rotate=\alpha]
     \meccanostrip[AAAAAA]{\c}{1}{#3}

     \begin{scope}[shift={(\c,0)},rotate=120]
      \meccanostrip[0088FF]{\c}{1}{#3}
     \end{scope}

    \end{scope}
    \begin{scope}[shift={(\abb,0)},rotate=\alpha]
     \meccanostrip[00CC00]{\c}{1}{#3}
    \end{scope}
   
    \begin{scope}[shift={(\ab,0)},rotate=60]
     \meccanostrip[FF4400]{\ab}{1}{#3}
     \path(0,0) ++(-90:#4 + #3) node{$D$};

     \begin{scope}[shift={(\ab,0)},rotate=60]
      \meccanostrip[FF4400]{\ab}{1}{#3}
      \path(0,0) ++(-90:#4 + #3) node{$E$};
      \path(\abb,0) ++(-90:#4 + #3) node{$H$};
      \begin{scope}[shift={(\abb,0)},rotate=\alpha]
       \meccanostrip[00CC00]{\c}{1}{#3}
      \end{scope}
     
      \begin{scope}[shift={(\ab,0)},rotate=60]
       \meccanostrip[FF4400]{\ab}{1}{#3}
       \path(0,0) ++(-90:#4 + #3) node{$F$};
      \end{scope}

     \end{scope}


    \end{scope}
   \end{scope}

  \end{scope}

  \begin{scope}[shift={(\ab,0)}]
   \meccanostrip[AAAAAA]{\ab}{1}{#3}
   \path(\ab,0) ++(-90:#4 + #3) node{$X$};
   \begin{scope}[shift={(\ab,0)},rotate=120]
    \meccanostrip[AAAAAA]{\ab}{1}{#3}
   \end{scope}
  \end{scope}
}

